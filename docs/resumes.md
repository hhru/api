# Резюме

* [Cписок резюме авторизованного пользователя](#mine)
* [Просмотр резюме](#item)
* [Создание и редактирование резюме](#create_edit)
* [Публикация и продление резюме](#publish)
* [Условия заполнения полей резюмее](#conditions)
* [Условия заполнения полей нового резюме](#init-conditions)
* [Условия заполнения контактов в резюме](#conditions-contacts)
* [Дополнительные правила заполнения полей резюме](#conditions-other)
* [Короткое представление резюме](#resume-nano)

<a name="mine" />
## Cписок резюме авторизованного пользователя

`GET /resumes/mine` возвращает список резюме авторизованного пользователя. Без авторизации вернёт `403 Forbidden`.
```json
{
    "items": [
        {
            "access": {
                "blacklist": [],
                "whitelist": [],
                "type": {
                    "id": "blacklist",
                    "name": "все компании, кроме выбранных"
                }
            },
            "id": "12345678901234567890123456789012abcdef",
            "title": "Программист Python",
            "url": "https://api.hh.ru/resumes/12345678901234567890123456789012abcdef",
            "alternate_url": "http://hh.ru/resume/12345678901234567890123456789012abcdef",
            "created_at": "2013-05-31T14:27:04+0400",
            "updated_at": "2013-05-31T15:08:52+0400",
            "finished": true,
            "blocked": true
        }
    ],
    "page": 0,
    "per_page": 1,
    "pages": 1,
    "found": 1
}
```

Если установлен тип видимости: `whitelist` или `blacklist`, то в соответствующем ключе будет список компаний:
```
"whitelist": [
  {
    "url": "https://api.hh.ru/employers/1455",
    "id": "1455"
  }
]
```

Ключ `finished` указывает на статус завершенности резюме.

<a name="item" />
## Просмотр резюме

`GET /resumes/{resume_id}` возвращает указанное резюме. 
Возможен запрос резюме без авторизации в случае, если в резюме указан тип видимости: «видно всему интернету» или 
«по прямой ссылки» (`everyone` и `direct` соответственно). 
В случае, если резюме запрошено при авторизации автором, то возвращается более детальная информация, включая тип 
видимости и комментарии модераторов.
Если резюме не доступно пользователю, то на запрос выдается `403 Forbidden` либо `404 Not found`, в зависимости от 
текущей авторизации пользователя и типа резюме.
Если просмотр контактов не доступен при указанном типе авторизации, то в соответствующих полях будет `null`.

```json
{
    "id": "12345678901234567890123456789012abcdef",
    "last_name": "Фамилия",
    "first_name": "Имя",
    "middle_name": "Отчество",
    "birth_date": "1980-05-08",
    "gender": {
        "id": "male",
        "name": "Мужской"
    },
    "photo": {
        "40": "http://i.hh.ru/css/ambient/blocks/head/logo.png&s=e3f9b6438866b5f3c3f39e50d001d410",
        "100": "http://hh.ru/employer-logo/289169.png&s=fcbdb9381041df31fa989b6303ed0edd",
        "500": "http://hh.ru/employer-logo/289169.png&s=f43f564da166f9586d09666f72114413"
    },
    "area": {
        "url": "https://api.hh.ru/areas/1",
        "id": "1",
        "name": "Москва"
    },
    "metro": {
        "lat": 55.658147,
        "lng": 37.540957,
        "order": 19,
        "id": "6.41",
        "name": "Калужская"
    },
    "relocation": {
        "type": {
            "id": "relocation_possible",
            "name": "готов к переезду"
        },
        "area": [
            {
                "url": "https://api.hh.ru/areas/2",
                "id": "2",
                "name": "Санкт-Петербург"
            },
            {
                "url": "https://api.hh.ru/areas/76",
                "id": "76",
                "name": "Ростов-на-Дону"
            }
        ]
    },
    "business_trip_readiness": {
        "id": "ready",
        "name": "Готов к командировкам"
    },
    "contact": [
        {
            "comment": null,
            "type": {
                "id": "cell",
                "name": "Мобильный телефон"
            },
            "preferred": true,
            "value": {
                "country": "7",
                "city": "123",
                "number": "4567890"
            }
        },
        {
            "type": {
                "id": "email",
                "name": "Эл. почта"
            },
            "preferred": false,
            "value": "applicant@example.com"
        }
    ],
    "site": [
        {
            "url": "echo123",
            "type": {
                "id": "skype",
                "name": "Skype"
            }
        },
        {
            "url": "123456",
            "type": {
                "id": "icq",
                "name": "ICQ"
            }
        }
    ],
    "title": "Программист Python",
    "specialization": [
        {
            "id": "1.221",
            "name": "Программирование, Разработка",
            "profarea_id": "1",
            "profarea_name": "Информационные технологии, интернет, телеком"
        },
        {
            "id": "1.89",
            "name": "Интернет",
            "profarea_id": "1",
            "profarea_name": "Информационные технологии, интернет, телеком"
        },
        {
            "id": "1.9",
            "name": "Web инженер",
            "profarea_id": "1",
            "profarea_name": "Информационные технологии, интернет, телеком"
        }
    ],
    "salary": {
        "amount": 100500,
        "currency": "RUR"
    },
    "employment": {
        "id": "full",
        "name": "Полная занятость"
    },
    "schedule": {
        "id": "fullDay",
        "name": "Полный день"
    },
    "education": {
        "elementary": [],
        "additional": [
            {
                "name": "Курс повышения квалификации",
                "organization": "Проводившая организация",
                "result": "Специализация",
                "year": 2006
            }
        ],
        "attestation": [
            {
                "name": "Тест на IQ",
                "organization": "IQ центр",
                "result": "Интеллект квалификейшн",
                "year": 2005
            }
        ],
        "primary": [
            {
                "name": "Московская государственная академия ветеринарной медицины и биотехнологии имени К.И. Скрябина, Москва",
                "organization": "Факультет зоотехнологий и агробизнеса",
                "result": "Социальная психология",
                "year": 2000
            }
        ],
        "level": {
            "id": "higher",
            "name": "Высшее"
        }
    },
    "language": [
        {
            "id": "rus",
            "name": "Русский",
            "level": {
                "id": "native",
                "name": "родной"
            }
        },
        {
            "id": "eng",
            "name": "Английский",
            "level": {
                "id": "can_read",
                "name": "читаю профессиональную литературу"
            }
        }
    ],
    "experience": [
        {
            "company": "Название работадателя",
            "area": {
                "url": "https://api.hh.ru/areas/113",
                "id": "113",
                "name": "Россия"
            },
            "company_url": "http://www.rbc.ru",
            "industry": {
                "id": "9",
                "name": "Телекоммуникации, связь"
            },
            "position": "Должность",
            "start": "2005-04-01",
            "end": "2013-01-01",
            "description": "Описание деятельности в компании"
        }
    ],
    "skills": "Ключевые навыки сотрудника",
    "citizenship": [
        {
            "url": "https://api.hh.ru/areas/113",
            "id": "113",
            "name": "Россия"
        }
    ],
    "work_ticket": [
        {
            "url": "https://api.hh.ru/areas/113",
            "id": "113",
            "name": "Россия"
        }
    ],
    "travel_time": {
        "id": "any",
        "name": "Не имеет значения"
    },
    "recommendation": [
        {
            "name": "Петров Петр",
            "position": "старший научный сотрудник",
            "organization": "Роскосмос",
            "contact": "+7 495 123 45 67"
        }
    ],
    "alternate_url": "http://hh.ru/resume/12345678901234567890123456789012abcdef",
    "resume_locale": {
        "id": "RU",
        "name": "Русский"
    },
    "created_at": "2013-05-31T14:27:04+0400",
    "updated_at": "2013-10-17T15:22:55+0400",
    "blocked": false,
    "finished": true,
    "_progress": {
        "percentage": 42,
        "mandatory": [
            "citizenship",
            "language",
            "area",
            "skills",
            "contact",
            "education",
            "specialization"
        ],
        "recommended": [
            "salary",
            "middle_name",
            "work_ticket",
            "site",
            "recommendation",
            "birth_date"
        ]
    },    
}
```

Владельцу резюме выдается информация о заполненности резюме в поле ```_progress```:

 Поле | Описание
 --- | ---
 percentage | Процент заполненности резюме
 mandatory | Обязательные, но еще не заполненные поля
 recommended | Рекомендованные к заполнению, но ещё не заполненные поля
 
 
<a name="create_edit" />
## Создание и редактирование резюме

`POST /resumes` - добавление резюме.
`PUT /resumes/{resume_id}` — редактирование существующего.
В качестве тела запроса используется json в том же формате, что отдается при GET запросе. 
При этом для полей с данными справочников из передаваемой json-структуры используются только id передаваемых данных. 
Например, в резюме в поле владения языками, указан русский как родной:
```json
    "language": [
        {
            "id": "34",
            "name": "Русский",
            "level": {
                "id": "native",
                "name": "родной"
            }
        }
     ]
```

Для того, чтобы добавить английский с уровнем знания "читаю профессиональную литературу", необходимо отправить 
следующий json:
```json
    "language": [
        {
            "id": "rus",
            "name": "Русский",
            "level": {
                "id": "native",
                "name": "родной"
            }
        },
        {
            "id": "eng",
            "level": {
                "id": "can_read"
            }
        }
    ]
```
Первый элемент списка — это русский, который у нас уже был в языках, а второй — это новый элемент, английский, 
который мы хотим добавить. Поля `name`, в данном случае не мешают, но и не несут полезную информацию. 
При отправке данные заменяют уже существующие данные указанного параметра. Каждый параметр можно отправлять отдельно от 
остальных.

Параметры:
* `last_name` — фамилия;
* `first_name` — имя;
* `middle_name` — отчество;
* `birth_date` — день рождения (ГГГГ-ММ-ДД);
* `gender` — пол. Элемент справочника [gender](dictionaries.md);
* `photo` — набор фотографий пользователя. 
* `area` — город проживания. Элемент справочника [areas](areas.md);
* `metro` — ближайшая станция метро. Элемент справочника [metro](metro.md). Имеет смысл указывать только для `area` с метро;
* `relocation` — возможен ли переезд в другой город. Состоит из полей:
    * `type` — элемент справочника [relocation_type](dictionaries.md);
    * `areas` — город, в который возможен переезд (список). Имеет смысл, только с соответствующим полем `type`. Элемент справочника [areas](areas.md);
* `business_trip_readiness` — готовность к командировкам. Элемент справочника [resume_trip_readiness](dictionaries.md#resume_trip_readiness)
* `contact` — контактная информация (список). Состоит из полей:
    * `type` — элемент справочника [prefered_contact_type](dictionaries.md)
    * `value` — значение контакта. Для телефона состоит из трех полей, для электронного адреса — строка.
    * `preferred` — предпочитаемый вид связи (true или false);
    * `comment` — комментарий к контакту;
* `site` — присутствие на других сайтах. Состоит из полей:
    * `type` — тип сайта. Элемент справочника [resume_contacts_site_type](dictionaries.md);
    * `url` — ссылка на профиль, либо идентификатор на строннем сайте/сервисе;
* `title` — желаемая должность;
* `specialization` — специализация соискателя (список). Элемент справочника [specializations](specializations.md);
* `salary` — желаемая зарпалат. Состоит из полей:
    * `amount` — сумма;
    * `currency` — идентификатор [валюты](dictionaries.md);
* `employment` — занятость. Элемет справочника [employment](dictionaries.md)
* `schedule` — график работы. Элемент справочника [schedule](dictionaries.md)
* `education` — образование. Состоит из полей:
    * `elementary` — среднее образование (список). Состоит из полей:
        * `year` — год окончания;
        * `name` — название учебного заведения;
    * `additional` — курсы повышения квалификации (список). Состоит из полей:
        * `organization` — организация проводившая курс;
        * `name` — название курса;
        * `result` — специальность / специализация;
        * `year` — год окончания;
    * `attestation` — тесты, экзамены (список):
        * `organization` — организация проводившая тест или экзамен;
        * `name` — название тест или экзамена;
        * `result` — специальность / специализация;
        * `year` — год сдачи;
    * `primary` — образование выше среднего (список). Состоит из полей:
        * `name` — название учебного заведения;
        * `organization` — факультет;
        * `result` — специальность / специализация;
        * `year` — год окончания;
    * `level` — уровень образования. Элемент справочника [education_level](dictionaries.md)
* `language` — владение языками (список). Состоит из элемента справочника [languages](languages.md) с добавлением [language_level](dictionaries.md) в поле `level`;
* `experience` — опыт работы (список). Состоит из полей:
    * `company` — организация;
    * `area` — регион расположения орагнизации. Элемента справочника [areas](areas.md);
    * `company_url` — сайт компании;
    * `industry` — отрасль компании. Элемент справочника [/industries](industries.md)
    * `position` — должность;
    * `start` — начало работы (ГГГГ-ММ-ДД);
    * `end` — окончание работы (ГГГГ-ММ-ДД);
    * `description` — обязанности, функции, достижения;
* `skills` — ключевые навыки;
* `citizenship` — гражданство (список). Элемента справочника [areas](areas.md);
* `work_ticket` — разрешение на работу (список). Элемента справочника [areas](areas.md);
* `travel_time` — желательное время в пути до работы. Элемент справочника [travel_time] (dictionaries.md);
* `recommendation` — рекомендация (список). Состоит из полей:
    * `name` — имя;
    * `position` — должность;
    * `organization` — организация;
    * `contact` — телефон;
* `resume_locale` — локаль резюме. Элемент справочника [локали резюме] (locales.md).


<a name="publish" />
## Публикация резюме

`POST /resumes/{resume_id}/publish`

При первой публикации резюме, оно становится доступно для использования. Повторная публикация означает продление резюме. 
Продлевать резюме можно не чаще чем раз в 4 часа.

В случае успешной публикации вернётся код ответа `204 No Content`. 

При привышении лимита обновлений – `429 Too Many Requests`. 

Если публикация не возможна, так как не заполнены обязательные поля – `400 Bad Request`.

Если операция публикации резюме не доступна по причинам отсутствия прав – `403 Forbidden` (например, для работодателя). 


<a name="conditions" />
## Условия заполнения полей резюме

`GET /resumes/{resume_id}/conditions` – возвращает список требований для полей резюме.

Условия к резюме доступны только его автору, в противном случае вернётся код ответа `403 Forbidden`.

Если резюме не доступно – код ответа `404 Not Found`.

Если условия получены успешно – код ответа `200 OK`.

Пример:
```javascript
{
  "last_name": {
    "required": true,
    "max_length": 100,
    "min_length": 1
  },
  "citizenship": {
    "required": true,
    "min_count": 1,
    "max_count": 3
  },
  "resume_locale": {
    "required": true
  },
  "education": {
    "required": true,
    "fields": {
      "elementary": {
        "required": false,
        "min_count": 0,
        "max_count": 64,
        "fields": {
          "name": {
            "required": true,
            "min_length": 1,
            "max_length": 512
          },
          "year": {
            "required": true,
            "min_value": 1950,
            "max_value": 2023
          }
        }
      },
      "primary": {
        "required": true,
        "min_count": 1,
        "max_count": 64,
        "fields": {
          "result": {
            "required": false,
            "min_length": 1,
            "max_length": 128
          },
          "organization": {
            "required": true,
            "min_length": 1,
            "max_length": 128
          },
          "name": {
            "required": true,
            "min_length": 1,
            "max_length": 512
          },
          "year": {
            "required": true,
            "min_value": 1950,
            "max_value": 2023
          }
        },
      },
      "level": {
        "required": true
      },
      //...
    }
  },
  "salary": {
    "required": false,
    "fields": {
      "currency": {
        "required": true,
        "min_length": 3,
        "max_length": 3
      },
      "amount": {
        "required": true,
        "min_value": 0,
        "max_value": null
      }
    }
  },
  "birth_date": {
    "required": false,
    "min_date": "1900-01-01",
    "max_date": "1999-10-21"
  },
  //...
}
```

Каждое конечное поле описано объектом правил. Если поле в резюме состоит из объекта с несколькими полями, 
эти поля описаны в `fields`. 

Для всех полей и их частей указано, являются ли они необходимыми (`required`). Может быть так, что поле, 
представленное объектом с полями, само по себе не является необходимым, но если заполнено хотя бы одно поле объекта, 
необходимо заполнить и другие его поля. Пример – желаемая зарплата (`salary`) может быть не указана, либо указана, 
но обязательно с валютой.

Правила
-------

Имя | Тип | Описание
--- | --- | ---
required | логический | Поле резюме или поле объекта является необходимым.
min_length | целое | Минимальная длина для текстовых полей.
max_length | целое | Максимальная длина для текстовых полей.
min_count | целое | Минимальное количество объектов, для полей, где необходимо передовать список.
max_count | целое или `null` | Максимально количество объектов, для полей, где необходимо передовать список. `null` если количество не ограничено.
min_value | целое | Нижняя граница диапозона числовых значений, включительно.
man_value | целое или `null` | Верняя граница диапозона числовых значений, включительно. `null` если верхняя границе не определена.
min_date | строка с датой | Нижняя граница диапозона значений дат, включительно.
man_date | строка с датой | Верняя граница диапозона значений дат, включительно.


<a name="init-conditions" />
## Условия заполнения полей нового резюме

`GET /resume_conditions` – возвращает список требований для полей нового резюме.
Для получения правил требуется авторизация пользователя, являющегося соискателем, в противном случае вернётся код 
ответа `403 Forbidden`.

Если правила получены успешно код ответа - `200 OK`.


<a name='conditions-contacts' />
## Условия заполнения контактов в резюме
При заполнении контактов в резюме необходимо учитывать следующие условия:
 
 * В резюме обязательно должен быть указан email (и он может быть только один).

 * В резюме должен быть указан хотя бы один телефон, причём можно указывать только один телефон каждого типа.
 
 * Коментарий можно указывать только для телефонов, для email комментарий не сохранится.

 * В контакте типа 'email' value - это email, а для телефонов - объект.
  
Формат поля value для телефона:
```json
{
    "country": "7",
    "city": "123",
    "number": "4567890"
}
``` 
здесь:

 * country - код города
 * city - код города
 * number - номер телефона

 
<a name='conditions-other' />
## Дополнительные правила заполнения полей резюме

Существует ещё несколько правил заполнения резюме, которые не укладываются в представленный выше формат:

 * Нельзя создавать несколько резюме с одинаковым title

 * Специализации должны быть из одной профессиональной области

 * Город проживания должен быть из справочника `/areas` и при этом у выбранного города не должно быть потомков (т.е. нельзя указать город проживания "Россия")

 * Ближайшая станция метро должна находиться в городе проживания

 * Для специализаций из профессиональной области *Начало карьеры, студенты* (id=15) можно не указывть опыт работы и навыки. Для остальных профобластей данные поля должны содержать хотя бы по одной записи.

 * Минимальный размер желаемой компенсации зависит от выбранных специализаций, будьте честными при указании данных.

 * Часть полей резюме явлюяются readonly, т.е. пользователь не может их измененить при помощи POST/PUT на /resumes. Эти поля: `_progress, photo, updated_at, moderation_note, blocked, finished`.


<a name="resume-nano" />
## Короткое представление резюме

Самое короткое представление резюме:
```json
{
    "id": "502ff8b100018bddf30039ed1f63735f4dda66",
    "title": "консультант",
    "url": "https://api.hh.ru/resumes/502ff8b100018bddf30039ed1f63735f4dda66"
}
```

где:

 Имя  | Тип    | Описание
 ---- | ------ | ---
 id   | строка | Идентификатор резюме
 title | строка | Желаемая должность
 url  | строка | Ссылка на получение полной версии резюме
