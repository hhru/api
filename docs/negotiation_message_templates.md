# Тексты сообщений

Работодателю доступны для получения тексты, формируемые по шаблонам, для
использования в отправляемых соискателю приглашениях на вакансию или
[действиях по откликам/приглашениям](employer_negotiations.md#actions).

Количество доступных шаблонов будет зависеть от конкретного отклика/приглашения
или вакансии и их статусов. В данный момент существуют следующие шаблоны:

Имя | Описание
----|---------
invite | текст при приглашении соискателя на вакансию
invite_after_response | текст [при приглашении после отклика со стороны соискателя](employer_negotiations.md#invite)
quick_discard_after_response | текст пригодный для [быстрого отказа](employer_negotiations.md#discard) (без вывода на подтверждение пользователю текста отказа)
discard_after_response | текст при [отказе после отклика](employer_negotiations.md#discard)
discard_after_interview | текст при [отказе после приглашения соискателя на интервью](employer_negotiations.md#discard)

В будущем список шаблонов может быть расширен.


<a name="request"/>
## Запрос

Рекомендуется не конструировать url самостоятельно, а использовать url,
который содержится в объекте `templates` в
[списке откликов/приглашений](employer_negotiations.md#negotiations-list)
и подходящих вакансий:

```json
{
    "templates": [
        {
            "url": "https://api.hh.ru/message_templates/invite?resume_id=0123456789abcdef&vacancy_id=123456",
            "id": "invite"
        }
    ]
}
```

```
GET /message_templates/{template}?topic_id={topic_id}
GET /message_templates/{template}?vacancy_id={vacancy_id}&resume_id={resume_id}
```

где `template` — название шаблона из списка выше.

Параметры:

Имя | Описание
----|---------
topic_id | Идентификатор существующего отклика/приглашения. Не допускается одновременная передача с другими параметрами.
vacancy_id | Идентификатор вакансии для приглашения. Требует передачи параметра `resume_id`.
resume_id | Идентификатор резюме для приглашения на вакансию. Требует передачи параметра `vacancy_id`.

В случае, если переданы конфликтующие параметры – `topic_id` одновременно с
`resume_id` или `vacancy_id`, либо не переданы никакие параметры – будет возвращена ошибка.


<a name="response"/>
## Ответ

Успешный ответ приходит с кодом `200 OK` и содержит

```json
{
    "mail": {
        "text": "Здравствуйте, Иван Иванович! Благодарим Вас за отклик на вакансию... "
    }
}
```

Имя | Тип | Описание
----|-----|---------
text | Строка | Текст сообщения, отправляемого соискателю по электронной почте при приглашении/отказе. Может изменяться в зависимости от типа вакансии (например, для анонимной вакансии).


<a name="errors"/>
## Ошибки

* `404 Not Found` – если использован несуществующий шаблон.
* `403 Forbidden` – запрос выполнен анонимно, с авторизацией соискателя либо
  работодателя без подключенной услуги доступа к базе резюме.
* `400 Bad Request` – неверные параметры запроса.

Дополнительно к HTTP коду сервер может вернуть описание
[причины ошибки](errors.md#general-errors).

В частности:

Код | type | value | Причина
----|------|-------|--------
400 | bad_argument | topic_id | <ul><li>передан идентификатор несуществующего отклика/приглашения, отклика/приглашения другого работодателя, либо отклика/приглашения, к которому нет доступа у текущего менеджера</li><li>вакансия из отклика/приглашения была заархивирована</li><li>резюме из отклика/приглашения было скрыто/удалено</li></ul>
400 | bad_argument | resume_id | передан идентификатор несуществующего резюме либо резюме, недоступного работодателю
400 | bad_argument | vacancy_id | передан идентификатор несуществующей, скрытой или архивной вакансии, вакансии другого работодателя, либо вакансии, к которой нет доступа у текущего менеджера
